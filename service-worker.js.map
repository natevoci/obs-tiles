{"mappings":"AAAAA,KAAKC,iBAAL,WAAiCC,IAChCC,QAAQC,IAAR,4BAGDJ,KAAKC,iBAAL,YAAA,SAA2CC,GAC1CC,QAAQC,IAAR,0BACAF,EAAMG,UAELC,OAAOC,OAAOC,MAAKC,GAAcC,QAAQC,IACxCF,EAAWG,KAAIC,GACPP,OAAOQ,OAAOD,YAMzBb,KAAKC,iBAAL,SAA+BC,mBAIXa,KAAKb,EAAMc,QAAQC,MACrCf,EAAMgB,YACLZ,OAAOa,KAAP,oBAAgCX,MAAKY,GAC1BA,EAAMC,MAAMnB,EAAMc,SAASR,MAAKc,GAClCA,GAAYC,MAAMrB,EAAMc,SAASR,MAAKc,IAC5CF,EAAMI,IAAItB,EAAMc,QAASM,EAASG,SAC3BH","sources":["src/service-worker.js"],"sourcesContent":["self.addEventListener('install', event => {\r\n\tconsole.log('server-worker install');\r\n});\r\n\r\nself.addEventListener('activate', function(event) {\r\n\tconsole.log('server-worker activate');\r\n\tevent.waitUntil(\r\n\t\t// Clear cache when a new version is available\r\n\t\tcaches.keys().then(cacheNames => Promise.all(\r\n\t\t\tcacheNames.map(cacheName => {\r\n\t\t\t\treturn caches.delete(cacheName);\r\n\t\t\t})\r\n\t\t)),\r\n\t);\r\n});\r\n\r\nself.addEventListener('fetch', event => {\r\n\t// console.log(`server-worker fetch: ${event.request.url}`);\r\n\r\n\t// Just cache http and https request. (ie. don't cache chrome-extension requests)\r\n\tif (/^https?:\\/\\//.exec(event.request.url)) {\r\n\t\tevent.respondWith(\r\n\t\t\tcaches.open('obs-tiles-static').then(cache => {\r\n\t\t\t\tconst r = cache.match(event.request).then(response => {\r\n\t\t\t\t\treturn response || fetch(event.request).then(response => {\r\n\t\t\t\t\t\tcache.put(event.request, response.clone());\r\n\t\t\t\t\t\treturn response;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\treturn r;\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n});\r\n"],"names":["self","addEventListener","event","console","log","waitUntil","caches","keys","then","cacheNames","Promise","all","map","cacheName","delete","exec","request","url","respondWith","open","cache","match","response","fetch","put","clone"],"version":3,"file":"service-worker.js.map"}